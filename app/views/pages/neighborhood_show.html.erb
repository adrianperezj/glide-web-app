<div class="">

  <div class="container-title">
    <div class="title">
      <div class="title-img-pin"></div>
      <div class="title-txt"><%= @location.neighborhood %></div>
    </div>
  </div>

  <div class="container-1">
    <div class="row">
      <div class="d-flex">

        <div class="container-csl">
          <div class="card-show-loc">
            <div class="location-name-3"><%= truncate(@location.neighborhood, length: 35, omission: '...') %> </div>

            <div class="img-location-3">
              <% if @location.photo.present? %>
                <%= image_tag @location.photo, class: "img-location-3" %>
              <% else %>
                  <%= image_tag "map.png", class: "img-location-3" %>
              <% end %>
            </div>

            <div class="spaces-card">
              <div class="space-left">
                <span class="space-txt"><%= @location.category %></span>
              </div>
              <div class="space-right">
                <span class="space-txt"><%= @location.subcategory %></span>
              </div>
            </div>

            <div class="container-address">
              <p class="address-txt"><%= truncate(@location.address, length: 45, omission: '...') %></p>
              <div class="address-pin"></div>
            </div>

            <div>
              <p><%= link_to 'Write a review', new_location_review_path(@location), class: "btn btn-cyan-700" %></p>
              <p><%= link_to 'See reviews', location_reviews_path(@location), class: "btn btn-cyan-700" %></p>
            </div>
          </div>
        </div>

        <div class="container-rtl row">
          <div class="d-flex">
            <div class="cr-1">
                <% if @location.reviews.any? %>
                  <div class="cr-2">
                    <p class="title-ratings mx-2"><strong>Neighborhood</strong> - Ratings and Reviews</p>
                    <div class="row">
                      <div class="d-flex">
                        <div class="cr-left">
                          <div class="row">
                            <div class="d-flex">

                                <div class="rating-icon-1">
                                  <i class="fas fa-utensils icon"></i>
                                  <i class="fas fa-coffee icon"></i>
                                  <i class="fas fa-beer icon"></i>
                                  <i class="fas fa-home icon"></i>
                                  <i class="fas fa-subway icon"></i>
                                  <i class="fas fa-bicycle icon"></i>
                                  <i class="fas fa-bus icon"></i>
                                  <i class="fab fa-uber icon"></i>
                                  <i class="fas fa-cannabis"></i> <!-- Dealer icon -->
                                </div>

                                <div class="rating-txt-exp">
                                  <p><strong>Meal Cost:</strong></p>
                                  <p><strong>Coffee Cost:</strong></p>
                                  <p><strong>Beer Cost:</strong></p>
                                  <p><strong>Rent Cost:</strong></p>
                                  <p><strong>Subway near?</strong></p>
                                  <p><strong>Bike near?</strong></p>
                                  <p><strong>Bus near?</strong></p>
                                  <p><strong>Uber or ride app?</strong></p>
                                  <p><strong>Dealer near?</strong></p>
                                </div>

                                <div class="rating-num">
                                  <p>$<%= average_rating_by_neighborhood(@location.neighborhood, "meal_cost") %>&nbsp; &nbsp; USD</p>
                                  <p>$<%= average_rating_by_neighborhood(@location.neighborhood, "coffee_cost")  %>&nbsp; &nbsp;USD</p>
                                  <p>$<%= average_rating_by_neighborhood(@location.neighborhood, "beer_cost") %>&nbsp; &nbsp;USD</p>
                                  <p>$<%= average_rating_by_neighborhood(@location.neighborhood, "rent_cost") %>&nbsp; &nbsp;USD</p>
                                  <p><%= percentage_rating_by_neighborhood(@location.neighborhood, "metro") %>&nbsp; &nbsp;%</p>
                                  <p><%= percentage_rating_by_neighborhood(@location.neighborhood, "bike") %>&nbsp; &nbsp;%</p>
                                  <p><%= percentage_rating_by_neighborhood(@location.neighborhood, "bus") %>&nbsp; &nbsp;%</p>
                                  <p><%= percentage_rating_by_neighborhood(@location.neighborhood, "uber") %>&nbsp; &nbsp;%</p>
                                  <p><%= percentage_rating_by_neighborhood(@location.neighborhood, "dealer") %>&nbsp; &nbsp;%</p>
                                </div>
                            </div>
                          </div>
                        </div>

                        <div class="cr-right">
                          <div class="row">
                            <div class="d-flex">

                              <div class="rating-icon-1">
                                <i class="fas fa-shield-alt"></i> <!-- Safety Level icon -->
                                <i class="fas fa-wifi"></i> <!-- Internet Speed icon -->
                                <i class="fas fa-volume-up"></i> <!-- Noise Level icon -->
                                    <i class="fas fa-people-roof"></i> <!-- Family Zone icon -->
                                <i class="fas fa-glass-cheers"></i> <!-- Nightlife icon -->
                                <i class="fas fa-utensils"></i> <!-- Restaurants Quantity icon -->
                                <i class="fas fa-shopping-bag"></i> <!-- Shopping icon -->
                                <i class="fas fa-paw"></i> <!-- Pet Friendly icon -->
                              </div>

                              <div class="rating-txt-rt">
                                <p><strong>Safety level:</strong></p>
                                <p><strong>Working Internet Speed:</strong></p>
                                <p><strong>Average Noise Level:</strong></p>
                                <p><strong>Considered Family Zone:</strong></p>
                                <p><strong>Options for Nightlife:</strong></p>
                                <p><strong>Restaurants Variety:</strong></p>
                                <p><strong>Have Shopping:</strong></p>
                                <p><strong>Pet Friendly:</strong></p>
                              </div>

                              <div class="rating-num">
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "safety") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "internet_speed") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "noise_level") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "family_zone") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "nightlife") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "restaurants_qty") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "shopping") %></p>
                                <p><%= average_rating_by_neighborhood(@location.neighborhood, "pet_friendly") %></p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                <% else %>
                  <p>No reviews available.</p>
                <% end %>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

<br>
<br>
  <!--NEIGHBORHOODS LOCATIONS-->
  <div class="container-title">
      <div class="title">
        <div class="title-img-pin"></div>
        <div class="title-txt">Explore locations in <%= @location.neighborhood %></div>
      </div>
  </div>

  <div class="container loc">
    <div class="row">
      <%# locations = neighborhoods(@location.city) %>
      <% locations = Location.where(neighborhood: @location.neighborhood) %>
      <% if locations.any? %>
        <% locations.each do |location| %>
          <div class="container-city-card-1 mb-3 mx-3">
            <div class="">
              <div class="img-city-card">
                <%# find_location = Location.find_by(neighborhood: neighborhood) %>
                <% if location.photo.attached? %>
                  <%= image_tag location.photo, class: "location-photo" %>
                <% else %>
                  <%= image_tag "map.png", class: "location-photo" %>
                <% end %>
              </div>
              <div class="white-city-card">
                <div class="info-city-card">
                  <div class="city-name"> <%= location.name %> </div>
                  <%= link_to "View location", location_path(location), class: "btn btn-cyan-700" %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="col-md-12">
          <p>No locations in this neighborhood yet</p>
        </div>
      <% end %>
    </div>
  </div>

  <!--BOTONES-->
  <div class="btn-EB">
    <div class="d-flex">
      <%= link_to 'Back', locations_path, class: "btn btn-secondary-EB" %> </p>
    </div>
  </div>
</div>
